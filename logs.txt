root@ing-wyze-cam3-a000 opt# ./streamer
[I 1279990884] MODULE: Initializing module system
[I 1279991748] MODULE: Module system initialized successfully
[I 1279992552] MODULE: Registered module 'osd' v1.0.0 (On-Screen Display overlay system)
[I 1279993356] MODULE: Registered module 'rtsp' v1.0.0 (RTSP streaming server module)
[D 1279993936] main: Starting streamer - PID: 4506
[I 1279994170] main: Channel metrics initialized (legacy mode)
[D 1279994528] CONFIG: Using config file /opt/streamer.json
[I 1279994784] CONFIG: Loading configuration from: /opt/streamer.json
[I 1279995763] CONFIG: JSON configuration loaded successfully
[D 1279996723] CONFIG: Parsing JSON configuration values...
[D 1279997257] CONFIG: Parsed JPEG config: enabled=true, quality=85, channel=2
[D 1279997529] CONFIG: Found streams array at root level
[D 1279999048] CONFIG: Found streams array with 2 elements
[D 1279999806] CONFIG: Allocated streams array for 2 streams
[D 1280000875] CONFIG: Parsed resolution '1920x1080' as 1920x1080
[D 1280001440] CONFIG: Parsed stream[0]: 1920x1080, endpoint=ch0
[D 1280001682] CONFIG: Parsed resolution '640x360' as 640x360
[D 1280001872] CONFIG: Parsed stream[1]: 640x360, endpoint=ch1
[D 1280002058] CONFIG: JSON configuration parsed successfully
[D 1280002292] CONFIG:   Stream[0]: 1920x1080, bitrate=2048kbps, endpoint='ch0'
[D 1280002415] CONFIG:   Stream[1]: 640x360, bitrate=512kbps, endpoint='ch1'
[I 1280002568] CONFIG: Configuration monitoring thread started
[I 1280002841] CONFIG: Configuration initialized successfully
[D 1280002966] main: Streamer configuration loaded successfully
[W 1280003008] MODULE: Module system already initialized
[I 1280003046] main: Module system initialized
[I 1280003166] MODULE: Registered module 'motion' v1.0.0 (IVS-based motion detection with configurable ROI regions)
[I 1280003214] main: Motion detection module registered manually
[E 1280003346] MODULE: Module 'osd' already registered
[W 1280003392] main: Failed to register OSD module
[I 1280003522] MODULE: Initializing 3 registered modules
[I 1280003568] MODULE: Initializing module 'osd'
[D 1280003756] MODULE: Trying module config: /opt/osd.json
[I 1280004070] CONFIG: Configuration monitoring started for: /opt/streamer.json
[I 1280005042] MODULE: Loading config for module 'osd' from /opt/osd.json (binary dir)
[I 1280005515] MODULE: Module 'osd' config loaded successfully
[I 1280005810] OSD_MODULE: Initializing OSD module
[I 1280006070] OSD_MODULE: OSD module init - copied config: enabled=true, stream0_enabled=true, stream1_enabled=true
[I 1280006223] OSD_MODULE: Stream 0 time config: enabled=true, format='%F %T', font='/usr/share/fonts/default.ttf', size=48
[I 1280006346] OSD_MODULE: Stream 1 time config: enabled=true, format='%H:%M:%S', font='/usr/share/fonts/default.ttf', size=24
[I 1280006393] OSD_MODULE: OSD module initialized successfully
[I 1280006432] MODULE: Module 'osd' initialized successfully
[I 1280006958] MODULE: Initializing module 'rtsp'
[D 1280007028] MODULE: Trying module config: /opt/rtsp.json
[I 1280007718] MODULE: Loading config for module 'rtsp' from /opt/rtsp.json (binary dir)
[I 1280008097] RTSP_MODULE: RTSP config loaded - port: 554, enabled: true, TLS: disabled (port: 322)
[I 1280008323] RTSP_MODULE: RTSP auth config - enabled: false, username: 'admin', password: 'admin'
[I 1280009164] MODULE: Module 'rtsp' config loaded successfully
[I 1280009330] MODULE: Module 'rtsp' initialized successfully
[I 1280009941] MODULE: Initializing module 'motion'
[D 1280010056] MODULE: Trying module config: /opt/motion.json
[I 1280011178] MODULE: Loading config for module 'motion' from /opt/motion.json (binary dir)
[I 1280011803] MODULE: Module 'motion' config loaded successfully
[I 1280011868] MOTION: Initializing motion detection module
[I 1280013271] MOTION: Loaded ROI configuration from: ./roi.json
[I 1280013874] MOTION: Parsing 1 zones from web UI format
[I 1280014330] MOTION: Zone[0] ID=1 'Full Frame' type=include: (0,0) 0x0
[I 1280014676] MOTION: Motion settings: sensitivity=3, min_object_size=5
[I 1280014762] MOTION: Channel 1 dimensions: 640x360 (scaler enabled)
[I 1280014808] MOTION: Using channel 1 dimensions: 640x360
[I 1280014840] MOTION: Set zone[0] 'Full Frame' to IVS frame dimensions: 640x360
[I 1280015148] MOTION: Keeping original zone coordinates for OSD scaling per stream resolution
[I 1280015200] MOTION: Attempting to update OSD motion zones for stream 0
[I 1280015248] OSD_MODULE: osd_update_motion_zones called for group_id=0
[E 1280015284] OSD_MODULE: Invalid group_id 0 or context not found
[D 1280015563] MOTION: Failed to update OSD motion zones for stream 0 (result=-1), may not be enabled or ready
[I 1280015653] MOTION: Attempting to update OSD motion zones for stream 1
[I 1280015687] OSD_MODULE: osd_update_motion_zones called for group_id=1
[E 1280015718] OSD_MODULE: Invalid group_id 1 or context not found
[D 1280015755] MOTION: Failed to update OSD motion zones for stream 1 (result=-1), may not be enabled or ready
[I 1280016044] MOTION: Motion detection module initialized successfully
[I 1280016118] MODULE: Module 'motion' initialized successfully
[I 1280016158] MODULE: Module initialization complete: 3 success, 0 errors
[I 1280016197] main: Modules initialized
[D 1280016486] SENSOR: Getting sensor information from /proc/jz/sensor
[D 1280016714] SENSOR:   name: gc2053
[D 1280017224] SENSOR:   chip_id: 0x2053
[D 1280017764] SENSOR:   version: H20230726a
[D 1280018468] SENSOR:   i2c_addr: 0x37
[D 1280019356] SENSOR:   width: 1920
[D 1280019926] SENSOR:   height: 1080
[D 1280020384] SENSOR:   min_fps: 5
[D 1280021266] SENSOR:   max_fps: 40
[E 1280021968] SENSOR: File /proc/jz/sensor/i2c_bus not found
[E 1280022293] SENSOR: Using default value 0 for i2c_bus
[E 1280022403] SENSOR: File /proc/jz/sensor/boot not found
[E 1280022731] SENSOR: Using default value 0 for boot
[E 1280022835] SENSOR: File /proc/jz/sensor/mclk not found
[E 1280023156] SENSOR: Using default value 1 for mclk
[E 1280023270] SENSOR: File /proc/jz/sensor/video_interface not found
[E 1280023605] SENSOR: Using default value 0 for video_interface
[E 1280023709] SENSOR: File /proc/jz/sensor/reset_gpio not found
[E 1280023918] SENSOR: Using default value 91 for reset_gpio
[D 1280023959] SENSOR: Sensor info: gc2053 (1920x1080@40fps, i2c:0x37)
[D 1280024002] main: Sensor info read successfully
[D 1280024127] SENSOR: Validating configuration against sensor capabilities
[I 1280024170] SENSOR: Sensor configuration: 1920x1080@20fps
[I 1280024293] SENSOR: All streams will use sensor FPS: 20fps
[D 1280024336] main: Configuration validated and adjusted based on sensor capabilities
[OSD] SetPoolSize: 1228800 bytes
[I 1280024507] main: OSD memory pool set to 1200KB (matching prudynt-t)
[D 1280024554] main: System init start
[I 1280024670] main: Opening ISP...
[IMP_ISP] Open: opened /dev/tx-isp (fd=4)
[I 1280025257] main: ISP opened successfully
[I 1280025394] main: Adding sensor...
[IMP_ISP] AddSensor: enum idx=0 name='gc2053'
[IMP_ISP] AddSensor: found matching sensor at index 0
[IMP_ISP] AddSensor: using sensor_idx=0 for gc2053
[IMP_ISP] AddSensor: calling TX_ISP_SENSOR_SET_INPUT with index=0
[IMP_ISP] AddSensor: TX_ISP_SENSOR_SET_INPUT succeeded
[IMP_ISP] AddSensor: ISP buffer info: addr=0x0 size=4685424
[DMA] DMA init: using /dev/rmem
[DMA] DMA init: /dev/rmem mapped at 0x75231000 size=30408704 base_phys=0x06300000
[DMA] Alloc: (unnamed) size=4685424 phys=0x6300000 virt=0x75231000 (rmem off=0x0)
[IMP_ISP] AddSensor: allocated ISP buffer: virt=0x75231000 phys=0x6300000 size=4685424
[IMP_ISP] AddSensor: calling TX_ISP_SET_BUF with addr=0x6300000 size=4685424
[IMP_ISP] AddSensor: TX_ISP_SET_BUF succeeded
[IMP_ISP] AddSensor: gc2053 (idx=0, buf_size=4685424)
[I 1280267901] main: Sensor added successfully
[I 1280268175] main: Enabling ISP sensor...
[IMP_ISP] EnableSensor: proceeding without custom AE/AWB
[IMP_ISP] EnableSensor: about to call ioctl 0x40045626
[IMP_ISP] EnableSensor: ioctl 0x40045626 returned 0
[IMP_ISP] EnableSensor: ioctl 0x40045626 succeeded, sensor_idx=0
[IMP_ISP] EnableSensor: sensor index validated, proceeding to STREAMON
[IMP_ISP] EnableSensor: calling ioctl 0x80045612 (ISP STREAMON)
[IMP_ISP] EnableSensor: ioctl 0x80045612 succeeded
[IMP_ISP] EnableSensor: calling ioctl 0x800456d0 (LINK_SETUP)
[IMP_ISP] EnableSensor: ioctl 0x800456d0 succeeded, result=0
[IMP_ISP] EnableSensor: about to call ioctl 0x800456d2 (LINK_STREAM_ON)
[IMP_ISP] EnableSensor: gISPdev=0x77084850, fd=4
[IMP_ISP] EnableSensor: ioctl 0x800456d2 returned 0
[IMP_ISP] EnableSensor: ioctl 0x800456d2 succeeded
[IMP_ISP] EnableSensor: incrementing opened flag
[IMP_ISP] EnableSensor: sensor enabled (idx=0)
[IMP_ISP] EnableSensor: about to return 0
[I 1280270324] main: ISP sensor enabled successfully
[I 1280270751] COMMON: System memory: 93 MB
[I 1280271187] COMMON: Detected low-memory device: 93 MB total RAM
[I 1280271451] COMMON: Skipping explicit memory pools - relying on reduced buffer counts
[I 1280271499] COMMON: Low-memory optimizations rely on:
[I 1280271653] COMMON:   - Reduced nrVBs (1 buffer per channel)
[I 1280271700] COMMON:   - Smaller OSD pool (512KB)
[I 1280271962] COMMON:   - Disabled unused channels
[I 1280272010] COMMON:   - Let IMP system manage RMEM automatically
[I 1280272278] main: Calling IMP_System_Init()...
[System] Initializing...
[System] Subsystems initialized
[System] Initialized (IMP-1.1.6)
[I 1280272837] main: IMP_System_Init() returned: 0
[I 1280272873] main: System initialized successfully
[IMP_ISP] EnableTuning: opened /dev/isp-m0 (fd=6)
[IMP_ISP] EnableTuning: tuning initialized successfully
[D 1280273283] main: ISP tuning enabled successfully
[IMP_ISP] SetContrast: 128
[D 1280273364] main: ISP tuning contrast set to 128
[IMP_ISP] SetSharpness: 128
[D 1280273700] main: ISP tuning sharpness set to 128
[IMP_ISP] SetSaturation: 128
[D 1280273763] main: ISP tuning saturation set to 128
[IMP_ISP] SetBrightness: 128
[D 1280273818] main: ISP tuning brightness set to 128
[IMP_ISP] SetISPRunningMode: 0
[IMP_ISP] SetISPRunningMode: mode set successfully to 0
[D 1280274190] main: ISP running mode set to DAY
[IMP_ISP] SetSensorFPS: 25/1
[IMP_ISP] SetSensorFPS: FPS set successfully to 25/1
[I 1280277010] main: Sensor FPS set to 25/1 (prudynt-aligned; all channels use sensor FPS)
[IMP_ISP] GetSensorFPS: called with fps_num=0x7fcaa5c8 fps_den=0x7fcaa5cc
[IMP_ISP] GetSensorFPS: returning 25/1
[I 1280277958] main: Verified sensor FPS: 25/1 (25.00 fps)
[I 1280278239] COMMON: Channel 0: enabled=1, format='H264' -> payloadType=0x1 (H264), 1920x1080@25/1fps
[I 1280278490] COMMON: Channel 1: enabled=1, format='H264' -> payloadType=0x1 (H264), 640x360@25/1fps, scaler=enabled
[D 1280278618] COMMON: Updated channel configuration from JSON config: ch0=1, ch1=1, ch2=0, ch3=0
[D 1280278731] main: Configuration applied to channels successfully
[W 1280278772] COMMON: Applying memory optimizations for low-memory device
[I 1280278880] COMMON: Low-memory optimizations applied:
[I 1280278924] COMMON:   - Buffer optimization: nrVBs=1, FIFO depth=0
[I 1280278962] COMMON:   - Channel enabling: Based on configuration
[I 1280279076] COMMON:   - Channels 2-3: Not used in current setup
[I 1280279118] COMMON:   - Output resolution: Handled by RTSP module
[I 1280279154] COMMON: SUCCESS: optimized with configuration-driven channel management
[I 1280279280] main: === Initializing channel 0 ===
[FrameSource] CreateChn: Opened /dev/framechan0 (fd=7, blocking)
[System] Registered module [0,0]: FrameSource
[FrameSource] CreateChn: registered FrameSource module [0,0] with 1 output
[FrameSource] CreateChn: chn=0, 1920x1080, fmt=0xa
[D 1280279709] main: FrameSource channel 0 created
[FrameSource] SetChnAttr: chn=0, 1920x1080, fmt=0xa
[D 1280279868] main: FrameSource channel 0 attributes set
[FrameSource] GetChnFifoAttr: chn=0 -> maxdepth=0, depth=0
[I 1280280064] main: T31: Forcing FIFO depth to 0 (vendor-compatible)
[FrameSource] SetChnFifoAttr: chn=0, maxdepth=0, depth=0
[I 1280280142] main: FrameSource channel 0: FIFO buffer depth set to 0 frames
[KernelIF] Set frame depth: 0
[FrameSource] SetFrameDepth: chn=0, depth=0
[Encoder] SetMaxStreamCnt: chn=0, cnt=2
[I 1280280514] main: Channel 0: Set 2 stream buffers for low-memory device
[Encoder] SetStreamBufSize: chn=0, size=262144
[I 1280280688] main: Channel 0: Set 256KB stream buffer size for low-memory device
[I 1280280736] main: Channel 0: Set 2 stream buffers, 262144 bytes each
[Encoder] SetChnEntropyMode: chn=0, mode=2
[I 1280280887] main: Channel 0: payloadType=0x1, computed profile=0x42
[Encoder] SetDefaultParam: 1920x1080, 25/1 fps, profile=66, rc=1
[I 1280281055] main: Encoder channel 0 configured: 1920x1080@25/1fps, GOP=25, bitrate=2000kbps, mode=CBR
[Codec] SetDefaultParam: initialized
[Encoder] channel_encoder_init: 1920x1080, profile=0x42->0x42, fps=25/1, gop=25, bitrate=0
[Fifo] Init: size=4, max_elements=5
[Fifo] Init: size=7, max_elements=8
[Codec] Create: vendor library will handle hardware acceleration via /dev/avpu
[Codec] Create: codec=0x7522e0e0, channel=0
[Encoder] channel_encoder_init: frame_cnt=4, frame_size=1048576
[Fifo] Init: size=4, max_elements=5
[Encoder] CreateChn: chn=0, profile=66 created successfully
[Encoder] SetChnGopLength: chn=0, gop=25
[Encoder] RequestIDR: chn=0
[HW_Encoder] RequestIDR: next frame will be IDR
[Encoder] RegisterChn: grp=0, chn=0
[System] Registered module [1,0]: Encoder
[Encoder] CreateGroup: registered Encoder module [1,0] with 1 output and update callback
[Encoder] CreateGroup: grp=0
[I 1280282656] main: Encoder group 0 created successfully
[I 1280282782] main: Initializing OSD for channel 0 (size: 1920x1080)
[I 1280282836] OSD_MODULE: Initializing OSD for Group 0 (1920x1080)
[I 1280282972] OSD_MODULE: Channel 0 is enabled
[I 1280283014] OSD_MODULE: Global config available, stream_count=2
[I 1280283046] OSD_MODULE: Using stream0 configuration for channel 0
[I 1280283166] OSD_MODULE: OSD module state - initialized=true, enabled=true
[I 1280283204] OSD_MODULE: Stream 0 enabled in module config: true
[I 1280283238] OSD_MODULE: Applying module configuration to stream 0
[I 1280283361] OSD_MODULE: Applied module config to stream 0: enabled=true, time_enabled=true, format='%F %T'
[I 1280283412] OSD_MODULE: Allocating OSD context for group 0
[I 1280283563] OSD_MODULE: OSD context allocated successfully for group 0
[I 1280283800] OSD_MODULE: Initializing OSD context for group 0
[I 1280284258] OSD_MODULE: Initializing OSD context for group 0 (1920x1080)
[I 1280284340] OSD_MODULE: OSD config - enabled=true, time.enabled=true, time.format='%F %T'
[I 1280284518] OSD_MODULE: Context initialized with group_id=0, dimensions=1920x1080
[I 1280284562] OSD_MODULE: All 7 region handles initialized to INVHANDLE (-1)
[I 1280284604] OSD_MODULE: Mutex initialized successfully for group 0
[I 1280284720] OSD_MODULE: Stored OSD context for group 0 in global array at index 0
[I 1280284765] OSD_MODULE: Creating OSD group 0
[OSD] CreateGroup: allocated group 0 (36884 bytes)
[System] Registered module [4,0]: OSD
[OSD] CreateGroup: registered OSD module [4,0] with 1 output and update callback
[OSD] CreateGroup: grp=0
[I 1280285764] OSD_MODULE: OSD group 0 created successfully
[I 1280285812] OSD_MODULE: Initializing libschrift for group 0
[Encoder] stream_thread: started for channel 0
[Encoder] encoder_thread: started for channel 0
[I 1280305693] OSD_MODULE: libschrift initialized with simple, fast rendering
[D 1280306558] OSD_MODULE: Parsed font color '#FFFFFFFF' -> 0xFFFFFFFF
[D 1280307110] OSD_MODULE: Parsed background color '#00000044' -> 0x00000044
[I 1280307656] OSD_MODULE: OSD colors: font=#FFFFFFFF -> 0xFFFFFFFF (BGRA: 255,255,255,255), bg=#00000044 -> 0x00000044 (BGRA: 0,0,0,68)
[I 1280313972] OSD_MODULE: libschrift initialized successfully for group 0
[I 1280314776] OSD_MODULE: Validating time format for group 0
[I 1280315383] OSD_MODULE: Time format validated for group 0: '%F %T' -> '2025-10-13 08:38:05'
[I 1280316175] OSD_MODULE: Time format validated successfully for group 0
[I 1280316714] OSD_MODULE: Creating OSD regions for group 0
[I 1280317232] OSD_MODULE: Creating all OSD regions for Group 0
[I 1280317781] OSD_MODULE: Creating font region for Group 0
[OSD] CreateRgn: called with prAttr=0
[OSD] CreateRgn: allocated handle=0 from free list
[OSD] CreateRgn: NULL prAttr, creating empty region
[OSD] CreateRgn: handle=0 created (empty)
[I 1280320853] OSD_MODULE: Font region created with handle 0 for Group 0
[I 1280321252] OSD_MODULE: Creating logo region for Group 0 (enabled in config)
[OSD] CreateRgn: called with prAttr=0
[OSD] CreateRgn: allocated handle=1 from free list
[OSD] CreateRgn: NULL prAttr, creating empty region
[OSD] CreateRgn: handle=1 created (empty)
[I 1280321569] OSD_MODULE: Logo region created with handle 1 for Group 0
[I 1280321684] OSD_MODULE: Creating info region for Group 0 (enabled in config)
[OSD] CreateRgn: called with prAttr=0
[OSD] CreateRgn: allocated handle=2 from free list
[OSD] CreateRgn: NULL prAttr, creating empty region
[OSD] CreateRgn: handle=2 created (empty)
[I 1280321906] OSD_MODULE: Info region created with handle 2 for Group 0
[I 1280321941] OSD_MODULE: Skipping motion zone regions creation for Group 0 (disabled in config)
[I 1280322062] OSD_MODULE: Registering all valid regions to Group 0
[I 1280322098] OSD_MODULE: Registering region 0 (handle=0) to Group 0
[OSD] RegisterRgn: handle=0, grp=0
[I 1280322343] OSD_MODULE: Region 0 registered successfully to Group 0
[I 1280322380] OSD_MODULE: Registering region 1 (handle=1) to Group 0
[OSD] RegisterRgn: handle=1, grp=0
[I 1280322532] OSD_MODULE: Region 1 registered successfully to Group 0
[I 1280322572] OSD_MODULE: Registering region 2 (handle=2) to Group 0
[OSD] RegisterRgn: handle=2, grp=0
[I 1280322712] OSD_MODULE: Region 2 registered successfully to Group 0
[I 1280322756] OSD_MODULE: Registered 3 regions to Group 0
[OSD] SetRgnAttr: handle=2
[OSD] SetGrpRgnAttr: handle=2, grp=0
[I 1280322956] OSD_MODULE: Info region setup completed for Group 0
[E 1280323073] OSD_MODULE: Failed to open logo file: /usr/share/images/logo_224x60.bgra
[E 1280323252] OSD_MODULE: Failed to load logo from /usr/share/images/logo_224x60.bgra, disabling logo
[I 1280323388] OSD_MODULE: Logo region setup completed for Group 0
[I 1280323426] OSD_MODULE: Creating timestamp region for Group 0
[OSD] CreateRgn: called with prAttr=0
[OSD] CreateRgn: allocated handle=3 from free list
[OSD] CreateRgn: NULL prAttr, creating empty region
[OSD] CreateRgn: handle=3 created (empty)
[I 1280323728] OSD_MODULE: IMP_OSD_CreateRgn returned handle: 3 for Group 0 timestamp
[I 1280323775] OSD_MODULE: Timestamp region created with handle 3 for Group 0
[I 1280323884] OSD_MODULE: Registering timestamp region 3 with group 0
[OSD] RegisterRgn: handle=3, grp=0
[I 1280323954] OSD_MODULE: Timestamp region 3 registered with Group 0 successfully
[I 1280324076] OSD_MODULE: Timestamp region created successfully for Group 0
[I 1280324114] OSD_MODULE: Motion zones regions not created (T31L optimization), skipping setup for Group 0
[I 1280324150] OSD_MODULE: OSD regions created successfully for group 0
[I 1280324268] OSD_MODULE: Starting OSD for group 0
[OSD] Start: grp=0
[I 1280324343] OSD_MODULE: OSD started successfully for group 0
[I 1280324465] OSD_MODULE: OSD initialized and started for Group 0 (1920x1080) - COMPLETE SUCCESS
[I 1280324514] OSD_MODULE: Applying motion zones configuration for group 0
[I 1280324630] OSD_MODULE: Applied motion zones config to stream 0: enabled=false, include_color=0x80FF80FF, exclude_color=0xFFFF8080
[I 1280324675] OSD_MODULE: OSD initialized successfully for Group 0 - COMPLETE SUCCESS
[I 1280324803] main: OSD initialized successfully for channel 0
[I 1280324840] main: Binding FrameSource -> OSD -> Encoder for channel 0
[System] Bind request: [0,0,0] -> [4,0,0]
[System] Binding [0,0,0] -> [4,0,0]
[System] Bound FrameSource -> OSD (observer added)
[System] Bind request: [4,0,0] -> [1,0,0]
[System] Binding [4,0,0] -> [1,0,0]
[System] Bound OSD -> Encoder (observer added)
[I 1280325219] main: Bound FrameSource -> OSD -> Encoder for channel 0
[I 1280325331] main: Enabling FrameSource channel 0
[KernelIF] Set format: 1920x1080 fmt=0xa (fourcc=0x3231564e) sizeimage=3110400->3133440 bytesperline=2880 colorspace=8
[FrameSource] EnableChn: using sizeimage=3133440 from SET_FMT for chn=0
[KernelIF] Set buffer count: 1 (actual: 1)
[VBM] CreatePool: allocating pool_size=1448 (frame_count=1 * 0x428 + 0x180)
[VBM] CreatePool: chn=0, 1920x1080 fmt=0xa, 1 frames, size=3133440 (req=3133440 calc=3133440)
[DMA] Alloc: L�� siz��� size=3133440 phys=0x6778000 virt=0x756a9000 (rmem off=0x478000)
[VBM] Frame 0: phys=0x6778000 virt=0x756a9000
[VBM] CreatePool: chn=0 created successfully
[VBM] FillPool: chn=0, filling 1 frames
[VBM] FillPool: queued 1 frames
[VBM] PrimeKernelQueue: queued 1 frames to kernel for chn=0
[KernelIF] Set frame depth: 0
[FrameSource] EnableChn: capture thread signaled readiness
[KernelIF] Stream started
[FrameSource] EnableChn: chn=0 enabled successfully
[I 1280332158] main: FrameSource channel 0 enabled successfully
[Encoder] RequestIDR: chn=0
[HW_Encoder] RequestIDR: next frame will be IDR
[Encoder] StartRecvPic: chn=0
[I 1280332612] main: Encoder channel 0 started receiving pictures
[Encoder] RequestIDR: chn=0
[HW_Encoder] RequestIDR: next frame will be IDR
[I 1280333176] main: === Channel 0 initialization complete ===
[I 1280333226] main: === Initializing channel 1 ===
[FrameSource] CreateChn: Opened /dev/framechan1 (fd=9, blocking)
[System] Registered module [0,1]: FrameSource
[FrameSource] CreateChn: registered FrameSource module [0,1] with 1 output
[FrameSource] CreateChn: chn=1, 640x360, fmt=0xa
[D 1280333718] main: FrameSource channel 1 created
[FrameSource] SetChnAttr: chn=1, 640x360, fmt=0xa
[D 1280333787] main: FrameSource channel 1 attributes set
[FrameSource] GetChnFifoAttr: chn=1 -> maxdepth=0, depth=0
[I 1280334135] main: T31: Forcing FIFO depth to 0 (vendor-compatible)
[FrameSource] SetChnFifoAttr: chn=1, maxdepth=0, depth=0
[I 1280334202] main: FrameSource channel 1: FIFO buffer depth set to 0 frames
[KernelIF] Set frame depth: 0
[FrameSource] SetFrameDepth: chn=1, depth=0
[Encoder] SetMaxStreamCnt: chn=1, cnt=2
[I 1280334601] main: Channel 1: Set 2 stream buffers for low-memory device
[Encoder] SetStreamBufSize: chn=1, size=262144
[I 1280334670] main: Channel 1: Set 256KB stream buffer size for low-memory device
[I 1280335142] main: Channel 1: Set 2 stream buffers, 262144 bytes each
[Encoder] SetChnEntropyMode: chn=1, mode=2
[I 1280335228] main: Channel 1: payloadType=0x1, computed profile=0x42
[Encoder] SetDefaultParam: 640x360, 25/1 fps, profile=66, rc=1
[I 1280335594] main: Encoder channel 1 configured: 640x360@25/1fps, GOP=25, bitrate=500kbps, mode=CBR
[Codec] SetDefaultParam: initialized
[Encoder] channel_encoder_init: 640x360, profile=0x42->0x42, fps=25/1, gop=25, bitrate=0
[Fifo] Init: size=4, max_elements=5
[Fifo] Init: size=7, max_elements=8
[Codec] Create: vendor library will handle hardware acceleration via /dev/avpu
[Codec] Create: codec=0x7522f5a0, channel=1
[Encoder] channel_encoder_init: frame_cnt=4, frame_size=1048576
[Fifo] Init: size=4, max_elements=5
[Encoder] CreateChn: chn=1, profile=66 created successfully
[Encoder] SetChnGopLength: chn=1, gop=25
[Encoder] RequestIDR: chn=1
[HW_Encoder] RequestIDR: next frame will be IDR
[Encoder] RegisterChn: grp=1, chn=1
[System] Registered module [1,1]: Encoder
[Encoder] CreateGroup: registered Encoder module [1,1] with 1 output and update callback
[Encoder] CreateGroup: grp=1
[I 1280337712] main: Encoder group 1 created successfully
[I 1280337754] main: Initializing OSD for channel 1 (size: 640x360)
[I 1280337794] OSD_MODULE: Initializing OSD for Group 1 (640x360)
[I 1280337980] OSD_MODULE: Channel 1 is enabled
[I 1280338223] OSD_MODULE: Global config available, stream_count=2
[I 1280338264] OSD_MODULE: Using stream1 configuration for channel 1
[I 1280338317] OSD_MODULE: OSD module state - initialized=true, enabled=true
[I 1280338356] OSD_MODULE: Stream 1 enabled in module config: true
[FrameSource] frame_capture_thread: started for channel 0, state=2, fd=7
[FrameSource] frame_capture_thread chn=0: entering main loop
[FrameSource] frame_capture_thread chn=0: poll iteration 1, state=2, fd=7, software_mode=0
[FrameSource] frame_capture_thread chn=0: about to select() (poll #1)
[FrameSource] frame_capture_thread chn=0: select() returned 1 (errno=0)
[I 1280338521] OSD_MODULE: Applying module configuration to stream 1
[I 1280339301] OSD_MODULE: Applied module config to stream 1: enabled=true, time_enabled=true, format='%H:%M:%S'
[I 1280339352] OSD_MODULE: Allocating OSD context for group 1
[I 1280339426] OSD_MODULE: OSD context allocated successfully for group 1
[I 1280339468] OSD_MODULE: Initializing OSD context for group 1
[I 1280339502] OSD_MODULE: Initializing OSD context for group 1 (640x360)
[I 1280339846] OSD_MODULE: OSD config - enabled=true, time.enabled=true, time.format='%H:%M:%S'
[I 1280339932] OSD_MODULE: Context initialized with group_id=1, dimensions=640x360
[I 1280339969] OSD_MODULE: All 7 region handles initialized to INVHANDLE (-1)
[I 1280340060] OSD_MODULE: Mutex initialized successfully for group 1
[I 1280340098] OSD_MODULE: Stored OSD context for group 1 in global array at index 1
[I 1280340424] OSD_MODULE: Creating OSD group 1
[OSD] CreateGroup: allocated group 1 (36884 bytes)
[System] Registered module [4,1]: OSD
[OSD] CreateGroup: registered OSD module [4,1] with 1 output and update callback
[OSD] CreateGroup: grp=1
[I 1280341016] OSD_MODULE: OSD group 1 created successfully
[I 1280341056] OSD_MODULE: Initializing libschrift for group 1
[I 1280341272] OSD_MODULE: libschrift initialized with simple, fast rendering
[D 1280341710] OSD_MODULE: Parsed font color '#FFFFFFFF' -> 0xFFFFFFFF
[D 1280341981] OSD_MODULE: Parsed background color '#00000044' -> 0x00000044
[I 1280342028] OSD_MODULE: OSD colors: font=#FFFFFFFF -> 0xFFFFFFFF (BGRA: 255,255,255,255), bg=#00000044 -> 0x00000044 (BGRA: 0,0,0,68)
[Encoder] stream_thread: started for channel 1
[Encoder] encoder_thread: started for channel 1
[I 1280346034] OSD_MODULE: libschrift initialized successfully for group 1
[I 1280346850] OSD_MODULE: Validating time format for group 1
[I 1280347418] OSD_MODULE: Time format validated for group 1: '%H:%M:%S' -> '08:38:05'
[I 1280348205] OSD_MODULE: Time format validated successfully for group 1
[I 1280348739] OSD_MODULE: Creating OSD regions for group 1
[I 1280349271] OSD_MODULE: Creating all OSD regions for Group 1
[I 1280349538] OSD_MODULE: Creating font region for Group 1
[OSD] CreateRgn: called with prAttr=0
[OSD] CreateRgn: allocated handle=4 from free list
[OSD] CreateRgn: NULL prAttr, creating empty region
[OSD] CreateRgn: handle=4 created (empty)
[I 1280349927] OSD_MODULE: Font region created with handle 4 for Group 1
[I 1280350266] OSD_MODULE: Creating logo region for Group 1 (enabled in config)
[OSD] CreateRgn: called with prAttr=0
[OSD] CreateRgn: allocated handle=5 from free list
[OSD] CreateRgn: NULL prAttr, creating empty region
[OSD] CreateRgn: handle=5 created (empty)
[I 1280350413] OSD_MODULE: Logo region created with handle 5 for Group 1
[I 1280350446] OSD_MODULE: Skipping info region creation for Group 1 (disabled in config)
[I 1280350746] OSD_MODULE: Skipping motion zone regions creation for Group 1 (disabled in config)
[I 1280350829] OSD_MODULE: Registering all valid regions to Group 1
[I 1280350862] OSD_MODULE: Registering region 0 (handle=4) to Group 1
[OSD] RegisterRgn: handle=4, grp=1
[I 1280350924] OSD_MODULE: Region 0 registered successfully to Group 1
[I 1280351120] OSD_MODULE: Registering region 1 (handle=5) to Group 1
[OSD] RegisterRgn: handle=5, grp=1
[I 1280351192] OSD_MODULE: Region 1 registered successfully to Group 1
[I 1280351224] OSD_MODULE: Registered 2 regions to Group 1
[I 1280351256] OSD_MODULE: Skipping info region setup for Group 1 (disabled in config)
[E 1280351348] OSD_MODULE: Failed to open logo file: /usr/share/images/logo_100x30.bgra
[E 1280351523] OSD_MODULE: Failed to load logo from /usr/share/images/logo_100x30.bgra, disabling logo
[I 1280351654] OSD_MODULE: Logo region setup completed for Group 1
[I 1280351692] OSD_MODULE: Creating timestamp region for Group 1
[OSD] CreateRgn: called with prAttr=0
[OSD] CreateRgn: allocated handle=6 from free list
[OSD] CreateRgn: NULL prAttr, creating empty region
[OSD] CreateRgn: handle=6 created (empty)
[I 1280351908] OSD_MODULE: IMP_OSD_CreateRgn returned handle: 6 for Group 1 timestamp
[I 1280352036] OSD_MODULE: Timestamp region created with handle 6 for Group 1
[I 1280352074] OSD_MODULE: Registering timestamp region 6 with group 1
[OSD] RegisterRgn: handle=6, grp=1
[I 1280352220] OSD_MODULE: Timestamp region 6 registered with Group 1 successfully
[I 1280352262] OSD_MODULE: Timestamp region created successfully for Group 1
[I 1280352378] OSD_MODULE: Motion zones regions not created (T31L optimization), skipping setup for Group 1
[I 1280352416] OSD_MODULE: OSD regions created successfully for group 1
[I 1280352508] OSD_MODULE: Starting OSD for group 1
[OSD] Start: grp=1
[I 1280352690] OSD_MODULE: OSD started successfully for group 1
[I 1280352919] OSD_MODULE: OSD initialized and started for Group 1 (640x360) - COMPLETE SUCCESS
[I 1280353123] OSD_MODULE: Applying motion zones configuration for group 1
[I 1280353168] OSD_MODULE: Applied motion zones config to stream 1: enabled=false, include_color=0x006000FF, exclude_color=0xFF600000
[I 1280353295] OSD_MODULE: OSD initialized successfully for Group 1 - COMPLETE SUCCESS
[I 1280353344] main: OSD initialized successfully for channel 1
[I 1280353378] main: Binding FrameSource -> OSD -> Encoder for channel 1
[System] Bind request: [0,1,0] -> [4,1,0]
[System] Binding [0,1,0] -> [4,1,0]
[System] Bound FrameSource -> OSD (observer added)
[System] Bind request: [4,1,0] -> [1,1,0]
[System] Binding [4,1,0] -> [1,1,0]
[System] Bound OSD -> Encoder (observer added)
[I 1280353889] main: Bound FrameSource -> OSD -> Encoder for channel 1
[I 1280353929] main: Enabling FrameSource channel 1
[KernelIF] Set format: 640x360 fmt=0xa (fourcc=0x3231564e) sizeimage=345600->353280 bytesperline=960 colorspace=8
[FrameSource] EnableChn: using sizeimage=353280 from SET_FMT for chn=1
[KernelIF] Set buffer count: 1 (actual: 1)
[VBM] CreatePool: allocating pool_size=1448 (frame_count=1 * 0x428 + 0x180)
[VBM] CreatePool: chn=1, 640x360 fmt=0xa, 1 frames, size=353280 (req=353280 calc=353280)
[DMA] Alloc: L��izei��� size=353280 phys=0x6a75000 virt=0x759a6000 (rmem off=0x775000)
[VBM] Frame 0: phys=0x6a75000 virt=0x759a6000
[VBM] CreatePool: chn=1 created successfully
[VBM] FillPool: chn=1, filling 1 frames
[VBM] FillPool: queued 1 frames
[VBM] PrimeKernelQueue: queued 1 frames to kernel for chn=1
[KernelIF] Set frame depth: 0
[FrameSource] EnableChn: capture thread signaled readiness
[KernelIF] Stream started
[FrameSource] EnableChn: chn=1 enabled successfully
[I 1280360930] main: FrameSource channel 1 enabled successfully
[Encoder] RequestIDR: chn=1
[HW_Encoder] RequestIDR: next frame will be IDR
[Encoder] StartRecvPic: chn=1
[I 1280361293] main: Encoder channel 1 started receiving pictures
[Encoder] RequestIDR: chn=1
[HW_Encoder] RequestIDR: next frame will be IDR
[I 1280361394] main: === Channel 1 initialization complete ===
[D 1280361431] main: Channel 2 not enabled, skipping
[D 1280361730] main: Channel 3 not enabled, skipping
[I 1280361779] main: All channels initialized successfully
[I 1280361816] main: Initializing JPEG encoder for channel 4 (stream 0)
[Encoder] SetDefaultParam: 1920x1080, 25/1 fps, profile=67108864, rc=0
[D 1280362118] main: Set default JPEG parameters for channel 4: 1920x1080
[Codec] SetDefaultParam: initialized
[Encoder] channel_encoder_init: 1920x1080, profile=0x4000000->0x0, fps=25/1, gop=0, bitrate=0
[Fifo] Init: size=4, max_elements=5
[Fifo] Init: size=7, max_elements=8
[Codec] Create: vendor library will handle hardware acceleration via /dev/avpu
[Codec] Create: codec=0x7511dad0, channel=2
[Encoder] channel_encoder_init: frame_cnt=4, frame_size=1048576
[Fifo] Init: size=4, max_elements=5
[Encoder] CreateChn: chn=4, profile=67108864 created successfully
[D 1280363505] main: Created JPEG channel 4
[Encoder] RegisterChn: grp=0, chn=4
[D 1280363862] main: Registered JPEG channel 4 to group 0
[I 1280363900] main: JPEG encoder channel 4 initialized successfully
[I 1280363938] main: Initializing JPEG encoder for channel 5 (stream 1)
[Encoder] SetDefaultParam: 640x360, 25/1 fps, profile=67108864, rc=0
[D 1280364288] main: Set default JPEG parameters for channel 5: 640x360
[Codec] SetDefaultParam: initialized
[Encoder] channel_encoder_init: 640x360, profile=0x4000000->0x0, fps=25/1, gop=0, bitrate=0
[Fifo] Init: size=4, max_elements=5
[Fifo] Init: size=7, max_elements=8
[Codec] Create: vendor library will handle hardware acceleration via /dev/avpu
[Codec] Create: codec=0x7511e590, channel=3
[Encoder] channel_encoder_init: frame_cnt=4, frame_size=1048576
[Fifo] Init: size=4, max_elements=5
[Encoder] CreateChn: chn=5, profile=67108864 created successfully
[D 1280365395] main: Created JPEG channel 5
[Encoder] RegisterChn: grp=1, chn=5
[D 1280365460] main: Registered JPEG channel 5 to group 1
[I 1280365492] main: JPEG encoder channel 5 initialized successfully
[I 1280365530] main: FrameSource stream started successfully
[I 1280365565] main: OSD updates will be handled by OSD module
[I 1280366142] MODULE: Starting all initialized modules
[I 1280366195] MODULE: Starting module 'osd'
[I 1280366234] OSD_MODULE: Starting OSD module
[I 1280366272] OSD_MODULE: Starting OSD timer thread
[I 1280366387] OSD_MODULE: OSD timer thread started successfully
[I 1280366440] OSD_MODULE: OSD module started successfully with independent timer thread
[I 1280366482] MODULE: Module 'osd' started successfully
[I 1280366519] MODULE: Starting module 'rtsp'
[I 1280366556] RTSP_MODULE: Starting RTSP module
[D 1280366618] RTSP: Creating RTSP server on port 554
[D 1280366713] RTSP: Copying RTSP server configuration
[D 1280366773] RTSP: Initializing GOP cache
[D 1280366815] RTSP: Initializing GOP cache for channel 0
[D 1280366848] RTSP: Initializing frame buffers for channel 0
[D 1280366879] RTSP: Allocating frame buffer 0 for channel 0
[D 1280366933] RTSP: Allocating frame buffer 1 for channel 0
[D 1280366994] RTSP: Allocating frame buffer 2 for channel 0
[D 1280367052] RTSP: Allocating frame buffer 3 for channel 0
[D 1280367108] RTSP: Allocating frame buffer 4 for channel 0
[D 1280367162] RTSP: Allocating frame buffer 5 for channel 0
[D 1280367215] RTSP: Allocating frame buffer 6 for channel 0
[D 1280367267] RTSP: Allocating frame buffer 7 for channel 0
[D 1280367315] RTSP: Allocating frame buffer 8 for channel 0
[D 1280367360] RTSP: Allocating frame buffer 9 for channel 0
[D 1280367412] RTSP: Allocating frame buffer 10 for channel 0
[D 1280367460] RTSP: Allocating frame buffer 11 for channel 0
[D 1280367501] RTSP: Allocating frame buffer 12 for channel 0
[D 1280367820] RTSP: Allocating frame buffer 13 for channel 0
[D 1280367888] RTSP: Allocating frame buffer 14 for channel 0
[D 1280367932] RTSP: Allocating frame buffer 15 for channel 0
[D 1280367987] RTSP: Allocating frame buffer 16 for channel 0[FrameSource] frame_capture_thread: started for channel 1, state=2, fd=9
[FrameSource] frame_capture_thread chn=1: entering main loop
[FrameSource] frame_capture_thread chn=1: poll iteration 1, state=2, fd=9, software_mode=0
[FrameSource] frame_capture_thread chn=1: about to select() (poll #1)
[FrameSource] frame_capture_thread chn=1: select() returned 1 (errno=0)
[Encoder] stream_thread: started for channel 5
[Encoder] encoder_thread: started for channel 5

[D 1280369226] RTSP: Allocating frame buffer 17 for channel 0
[D 1280369476] RTSP: Allocating frame buffer 18 for channel 0
[D 1280369718] RTSP: Allocating frame buffer 19 for channel 0
[Encoder] stream_thread: started for channel 4
[D 1280370581] RTSP: Allocating frame buffer 20 for channel 0
[D 1280371730] RTSP: Allocating frame buffer 21 for channel 0
[D 1280372142] RTSP: Allocating frame buffer 22 for channel 0
[D 1280372243] RTSP: Allocating frame buffer 23 for channel 0[Encoder] encoder_thread: started for channel 4

[D 1280372646] RTSP: Allocating frame buffer 24 for channel 0
[D 1280372781] RTSP: Allocating frame buffer 25 for channel 0
[D 1280373136] RTSP: Allocating frame buffer 26 for channel 0
[I 1280368703] OSD_MODULE: OSD timer thread started
[D 1280373295] RTSP: Allocating frame buffer 27 for channel 0
[D 1280373643] RTSP: Allocating frame buffer 28 for channel 0
[D 1280373715] RTSP: Allocating frame buffer 29 for channel 0
[D 1280373760] RTSP: Allocating frame buffer 30 for channel 0
[D 1280373800] RTSP: Allocating frame buffer 31 for channel 0
[D 1280374168] RTSP: Allocating frame buffer 32 for channel 0
[D 1280374235] RTSP: Allocating frame buffer 33 for channel 0
[D 1280374277] RTSP: Allocating frame buffer 34 for channel 0
[D 1280374624] RTSP: Allocating frame buffer 35 for channel 0
[D 1280374686] RTSP: Allocating frame buffer 36 for channel 0
[D 1280374747] RTSP: Allocating frame buffer 37 for channel 0
[D 1280375101] RTSP: Allocating frame buffer 38 for channel 0
[D 1280375159] RTSP: Allocating frame buffer 39 for channel 0
[D 1280375405] RTSP: Allocating frame buffer 40 for channel 0
[D 1280375760] RTSP: Allocating frame buffer 41 for channel 0
[D 1280375844] RTSP: Allocating frame buffer 42 for channel 0
[D 1280376198] RTSP: Allocating frame buffer 43 for channel 0
[D 1280376260] RTSP: Allocating frame buffer 44 for channel 0
[D 1280376598] RTSP: Allocating frame buffer 45 for channel 0
[D 1280376654] RTSP: Allocating frame buffer 46 for channel 0
[D 1280376698] RTSP: Allocating frame buffer 47 for channel 0
[D 1280377042] RTSP: Allocating frame buffer 48 for channel 0
[D 1280377102] RTSP: Allocating frame buffer 49 for channel 0
[D 1280377146] RTSP: Allocating frame buffer 50 for channel 0
[D 1280377186] RTSP: Allocating frame buffer 51 for channel 0
[D 1280377551] RTSP: Allocating frame buffer 52 for channel 0
[D 1280377622] RTSP: Allocating frame buffer 53 for channel 0
[D 1280377835] RTSP: Allocating frame buffer 54 for channel 0
[D 1280377894] RTSP: Allocating frame buffer 55 for channel 0
[D 1280377936] RTSP: Allocating frame buffer 56 for channel 0
[D 1280377980] RTSP: Allocating frame buffer 57 for channel 0
[D 1280378139] RTSP: Allocating frame buffer 58 for channel 0
[D 1280378188] RTSP: Allocating frame buffer 59 for channel 0
[D 1280378335] RTSP: Initializing GOP cache for channel 1
[D 1280378377] RTSP: Initializing frame buffers for channel 1
[D 1280378498] RTSP: Allocating frame buffer 0 for channel 1
[D 1280378950] RTSP: Allocating frame buffer 1 for channel 1
[D 1280379062] RTSP: Allocating frame buffer 2 for channel 1
[D 1280379235] RTSP: Allocating frame buffer 3 for channel 1
[D 1280379404] RTSP: Allocating frame buffer 4 for channel 1
[D 1280379458] RTSP: Allocating frame buffer 5 for channel 1
[D 1280379604] RTSP: Allocating frame buffer 6 for channel 1
[D 1280379656] RTSP: Allocating frame buffer 7 for channel 1
[D 1280379800] RTSP: Allocating frame buffer 8 for channel 1
[D 1280379930] RTSP: Allocating frame buffer 9 for channel 1
[D 1280379994] RTSP: Allocating frame buffer 10 for channel 1
[D 1280380203] RTSP: Allocating frame buffer 11 for channel 1
[D 1280380374] RTSP: Allocating frame buffer 12 for channel 1
[D 1280380851] RTSP: Allocating frame buffer 13 for channel 1
[D 1280381114] RTSP: Allocating frame buffer 14 for channel 1
[D 1280381456] RTSP: Allocating frame buffer 15 for channel 1
[D 1280381513] RTSP: Allocating frame buffer 16 for channel 1
[D 1280381842] RTSP: Allocating frame buffer 17 for channel 1
[D 1280381902] RTSP: Allocating frame buffer 18 for channel 1
[D 1280381950] RTSP: Allocating frame buffer 19 for channel 1
[D 1280382165] RTSP: Allocating frame buffer 20 for channel 1
[D 1280382218] RTSP: Allocating frame buffer 21 for channel 1
[D 1280382288] RTSP: Allocating frame buffer 22 for channel 1
[D 1280382464] RTSP: Allocating frame buffer 23 for channel 1
[D 1280382516] RTSP: Allocating frame buffer 24 for channel 1
[D 1280382704] RTSP: Allocating frame buffer 25 for channel 1
[D 1280382760] RTSP: Allocating frame buffer 26 for channel 1
[D 1280382986] RTSP: Allocating frame buffer 27 for channel 1
[D 1280383148] RTSP: Allocating frame buffer 28 for channel 1
[D 1280383206] RTSP: Allocating frame buffer 29 for channel 1
[D 1280383357] RTSP: Allocating frame buffer 30 for channel 1
[D 1280383407] RTSP: Allocating frame buffer 31 for channel 1
[D 1280383568] RTSP: Allocating frame buffer 32 for channel 1
[D 1280383722] RTSP: Allocating frame buffer 33 for channel 1
[D 1280383780] RTSP: Allocating frame buffer 34 for channel 1
[D 1280383928] RTSP: Allocating frame buffer 35 for channel 1
[D 1280383976] RTSP: Allocating frame buffer 36 for channel 1
[D 1280384130] RTSP: Allocating frame buffer 37 for channel 1
[D 1280384183] RTSP: Allocating frame buffer 38 for channel 1
[D 1280384333] RTSP: Allocating frame buffer 39 for channel 1
[D 1280384386] RTSP: Allocating frame buffer 40 for channel 1
[D 1280384530] RTSP: Allocating frame buffer 41 for channel 1
[D 1280384598] RTSP: Allocating frame buffer 42 for channel 1
[D 1280384758] RTSP: Allocating frame buffer 43 for channel 1
[D 1280384905] RTSP: Allocating frame buffer 44 for channel 1
[D 1280384962] RTSP: Allocating frame buffer 45 for channel 1
[D 1280385106] RTSP: Allocating frame buffer 46 for channel 1
[D 1280385159] RTSP: Allocating frame buffer 47 for channel 1
[D 1280385304] RTSP: Allocating frame buffer 48 for channel 1
[D 1280385352] RTSP: Allocating frame buffer 49 for channel 1
[D 1280385496] RTSP: Allocating frame buffer 50 for channel 1
[D 1280385544] RTSP: Allocating frame buffer 51 for channel 1
[D 1280385704] RTSP: Allocating frame buffer 52 for channel 1
[D 1280385860] RTSP: Allocating frame buffer 53 for channel 1
[D 1280386216] RTSP: Allocating frame buffer 54 for channel 1
[D 1280386290] RTSP: Allocating frame buffer 55 for channel 1
[D 1280386486] RTSP: Allocating frame buffer 56 for channel 1
[D 1280386540] RTSP: Allocating frame buffer 57 for channel 1
[D 1280386587] RTSP: Allocating frame buffer 58 for channel 1
[D 1280386734] RTSP: Allocating frame buffer 59 for channel 1
[D 1280386788] RTSP: Initializing clients
[D 1280386920] RTSP: Initializing client 0
[D 1280386958] RTSP: Initializing client 1
[D 1280387078] RTSP: Initializing client 2
[D 1280387123] RTSP: Initializing client 3
[D 1280387155] RTSP: Initializing client 4
[D 1280387276] RTSP: Initializing client 5
[D 1280387314] RTSP: Initializing client 6
[D 1280387346] RTSP: Initializing client 7
[D 1280387464] RTSP: RTSP server created successfully
[E 1280387508] RTSP_MODULE: RTSP: Configuring stream 0 (ch0): 1920x1080, bitrate=2048
[Encoder] GetChnAttr: chn=0
[D 1280387682] RTSP: Adding stream: ch0 (channel 0, H264)
[D 1280387816] RTSP: Reallocating streams array (current count: 0)
[D 1280387865] RTSP: Copying stream configuration
[D 1280387902] RTSP: Stream added successfully (total streams: 1)
[E 1280388030] RTSP_MODULE: RTSP: Configuring stream 1 (ch1): 640x360, bitrate=512
[Encoder] GetChnAttr: chn=1
[D 1280388095] RTSP: Adding stream: ch1 (channel 1, H264)
[D 1280388217] RTSP: Reallocating streams array (current count: 1)
[D 1280388265] RTSP: Copying stream configuration
[D 1280388384] RTSP: Stream added successfully (total streams: 2)
[I 1280388426] RTSP: Starting RTSP server
[I 1280388546] RTSP: Creating listen socket...
[I 1280388610] RTSP: Listen socket created successfully
[I 1280388754] RTSP: Binding socket to port 554...
[I 1280388822] RTSP: Socket bound successfully to port 554
[I 1280388960] RTSP: Setting socket to listen mode...
[I 1280389025] RTSP: Socket listening successfully
[I 1280389171] RTSP: Starting RTSP server thread...
[I 1280389429] RTSP: RTSP server thread started successfully
[I 1280389841] RTSP: Starting RTP thread...
[I 1280390145] RTSP: RTP thread started successfully
[I 1280390528] RTSP: RTSP server started successfully on port 554
[I 1280390713] MODULE: Module 'rtsp' started successfully
[I 1280390760] MODULE: Starting module 'motion'
[I 1280390811] MOTION: Starting motion detection module
[I 1280390948] MOTION: Motion detection disabled in configuration
[I 1280390990] MODULE: Module 'motion' started successfully
[I 1280391028] MODULE: Module start complete: 3 success, 0 errors
[I 1280391156] main: Modules started
[I 1280391232] SNAPSHOT_FALLBACK: Snapshot fallback initialized (dir=/tmp, interval=5000ms)
[I 1280391399] SNAPSHOT_FALLBACK: Snapshot fallback disabled in configuration
[I 1280391445] main: Snapshot fallback system started
[I 1280391640] main: Initialization complete, starting frame manager
[I 1280392228] FRAME_MGR: Frame manager initialized successfully
[I 1280392363] FRAME_MGR: Frame manager started successfully
[I 1280392997] main: Frame manager started - using modular architecture
[I 1280393816] FRAME_MGR: Frame processing thread started
[I 1280394644] FRAME_MGR: 64MB SoC: Using aggressive polling timeout: 20ms (was 40ms)
[E 1280395415] FRAME_MGR: hal_stream_get(block=1) failed on ch0: -1
[E 1280395748] FRAME_MGR: hal_stream_get(block=1) failed on ch1: -1
[W 1280395798] FRAME_MGR: hal_stream_poll(timeout=20ms) returned -1 on ch2
[W 1280396086] FRAME_MGR: hal_stream_poll(timeout=20ms) returned -1 on ch3
[E 1280416240] FRAME_MGR: hal_stream_get(block=1) failed on ch0: -1
[E 1280416328] FRAME_MGR: hal_stream_get(block=1) failed on ch1: -1
[W 1280416366] FRAME_MGR: hal_stream_poll(timeout=20ms) returned -1 on ch2
[W 1280416401] FRAME_MGR: hal_stream_poll(timeout=20ms) returned -1 on ch3
[E 1280436526] FRAME_MGR: hal_stream_get(block=1) failed on ch0: -1
[E 1280436615] FRAME_MGR: hal_stream_get(block=1) failed on ch1: -1
[W 1280436653] FRAME_MGR: hal_stream_poll(timeout=20ms) returned -1 on ch2
[W 1280436688] FRAME_MGR: hal_stream_poll(timeout=20ms) returned -1 on ch3
[E 1280456816] FRAME_MGR: hal_stream_get(block=1) failed on ch0: -1
[E 1280456901] FRAME_MGR: hal_stream_get(block=1) failed on ch1: -1
[W 1280456938] FRAME_MGR: hal_stream_poll(timeout=20ms) returned -1 on ch2
[W 1280456974] FRAME_MGR: hal_stream_poll(timeout=20ms) returned -1 on ch3
[W 1280497148] FRAME_MGR: hal_stream_poll(timeout=20ms) returned -1 on ch0
[W 1280517294] FRAME_MGR: hal_stream_poll(timeout=20ms) returned -1 on ch1
[W 1280517376] FRAME_MGR: hal_stream_poll(timeout=20ms) returned -1 on ch2
[W 1280517412] FRAME_MGR: hal_stream_poll(timeout=20ms) returned -1 on ch3
[W 1280557583] FRAME_MGR: hal_stream_poll(timeout=20ms) returned -1 on ch0
[W 1280577729] FRAME_MGR: hal_stream_poll(timeout=20ms) returned -1 on ch1
[W 1280617950] FRAME_MGR: hal_stream_poll(timeout=20ms) returned -1 on ch0
[W 1280638073] FRAME_MGR: hal_stream_poll(timeout=20ms) returned -1 on ch1
[W 1280678270] FRAME_MGR: hal_stream_poll(timeout=20ms) returned -1 on ch0
[W 1280698400] FRAME_MGR: hal_stream_poll(timeout=20ms) returned -1 on ch1
[W 1280738598] FRAME_MGR: hal_stream_poll(timeout=20ms) returned -1 on ch0
[W 1280758724] FRAME_MGR: hal_stream_poll(timeout=20ms) returned -1 on ch1
^C^C^C^C^C^C^C^C^C^C^C^C^C^C

